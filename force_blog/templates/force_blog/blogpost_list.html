<!-- Родительский шаблон, в него мы будем вставлять наши блоки -->
{% extends "base.html" %} 

<!-- Первый блок meta_title, к который мы встаим просто текст -->
<!-- Вот так выглядит этот блок в файле base.html - <title></title> -->
{% block meta_title %}Новости{% endblock %} 

<!-- Открываем новый блок -->
{% block main %}
<!-- {% load imagekit %} -->
<!-- Загружаем пользовательские теги -->
{% load urltag %}
{% load bootstrap_pagination %}
{% load comments_tags %}

<style type="text/css">
	.post-header-line { border-bottom:1px solid #DDD;padding:5px 0px 5px 15px;font-size: 12px; }
</style>

<div class="col-md-9 left">
<div class="panel panel-default">
<div class="panel-body">
<div class="blog">

<!-- Цикл, который выводит все посты новостей, которые мы передали -->
<!-- То есть, у нас будет выведено пять таких одинаковых блоков, но с разной инфой -->
{% for blog_post in blog_posts %}
	<div class="row" align="">
	<div class="col-md-1"></div>
	<div class="col-md-10" align="center">
		<p style="font-size:24px">
			<a href="{{ blog_post.get_absolute_url }}">
				<strong>{{ blog_post.title }}</strong>
			</a> 
		</p>
	</div>
	</div>
	<!-- {{ blog_post.text|safe|truncatewords:40 }} - обрезание по 40 символов -->
	<!-- Вывод текста -->
	{{ blog_post.text|safe }}
	<br>
	<div class="row">
        <div class="col-md-12 post-header-line">
        	<span class="glyphicon glyphicon-calendar"></span> Дата: {{ blog_post.date_publication|date:"d.m.Y, G:i" }} 
            | <span class="glyphicon glyphicon-user"></span> Автор: <a href="{{ blog_post.owner.get_absolute_url }}">{{ blog_post.owner.get_full_name }}</a> 
            | <span class="glyphicon glyphicon-comment"></span> <a href="{{ blog_post.get_absolute_url }}/#href_power_comments">
			Комментарии ({% count_power_comments blog_post.get_absolute_url %})</a>
            | <span class="glyphicon glyphicon-tags"></span> Теги : 
            	{% for category in blog_post.category.all %}
					<a href="/blog/category/{{ category.id }}"><span class="label label-default">{{ category.category }}</span></a> 
				{% endfor %}
        </div>
    </div>
	<!-- 
	<p class="text-muted" style="line-height: 1">
		<span class="glyphicon glyphicon-time"></span> Опубликовано: {{ blog_post.date_publication|date:"d.m.Y, G:i" }}, 
		<a href="{{ blog_post.owner.get_absolute_url }}">
			<span class="glyphicon glyphicon-user"></span> Автор: {{ blog_post.owner.get_full_name }},
		</a>
		Рейтинг: <span class="badge">{{ blog_post.rating }}</span>
	</p>  -->

	<!-- Проверяет или есть файлы. -->
	{% if blog_post.files == True %}
		<strong>Файлы:</strong>
		{% for file in blog_post.files.all %}
				<a href="{{ MEDIA_URL }}{{ file.one_file }}">{{ file.file_name }}</a>, 
		{% endfor %}
	{% endif %}

	<!-- <strong>Теги:</strong>
	{% for category in blog_post.category.all %}
		<a href="/blog/category/{{ category.id }}">{{ category.category }}</a>, 
	{% endfor %}
	<br><br> -->

	<!-- <form method="post" action="/hidden_blog/" class="form-inline">{% csrf_token %}
		<button type="button" class="btn btn-sm">
			<a href="{{ blog_post.get_absolute_url }}/#blog_title">Подробнее</a>
		</button>
		<button type="button" class="btn btn-sm">
			<a href="{{ blog_post.get_absolute_url }}/#href_power_comments">
			Комментарии ({% count_power_comments blog_post.get_absolute_url %})</a>
		</button>

		{% if user.is_superuser %}
			<button type="button" class="btn btn-sm">
				<a href="{% url_edit blog_post %}">
					<span class="glyphicon glyphicon-edit"></span> Админ-панель
				</a>
			</button>
			<input type="hidden" name="blog_id" value="{{ blog_post.id }}" />
	        <input type="submit" button class="btn btn-sm" value="Скрыть" />
		{% endif %}
	</form> -->
	<br>
{% endfor %}

<!-- Пагинация -->
{% bootstrap_pager page_obj %}
</div>
</div>
</div>
</div>

<div class="col-md-3 right">
	<!-- Тег, который в зависимости от url возвращает разные шаблоны -->
	<!-- Допустим, в одном случае он возвратит кусочек мероприятий -->
	<!-- Ну а в другом вообще ничего -->
    {% load page_navigation %}
    {% page_navigation request %}
</div>

<!-- И в конце закрывается блок -->
{% endblock %}